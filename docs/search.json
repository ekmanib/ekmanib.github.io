[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "About",
    "section": "",
    "text": "Hi there! I’m a young economist based in Quito, Ecuador. I received my Bachelors’ degree from San Francisco de Quito university. I’m currently pursuing a career in the space of analytics and data science. This website is a personal space to share portfolio projects and ideas that support me as I acquire more skills and knowledge relevant to my career but also to my life. I have work experience as research and teaching assistant, junior consultant and as a trainee in the data governance function at Banco Pichincha.\nAs of today, my efforts are focused on building solid, essential knowledge in analytics. These efforts mainly entail self-education through online courses, books, and other resources. This site is complementary and its purpose is twofold: to serve as a way to communicate with others through the written word and to actively practice acquired skills. Besides, I’m attempting to further promote my learning efforts by seeking and taking jobs in the space of analytics. My aim, of course, consists of become a professional data scientist. Other efforts aligned with this goal include the successful completion of a masters, acquisition of relevant certifications, and the ongoing development of projects and this, my personal site.\nBeyond deepening my knowledge in analytics, the intent is to explore and share the lessons along the way. During my early years at college I learned about agent-based models which lead me to learn the Python programming language and the scientific field of complex systems. Complex systems are still pretty much an interest of mine. Curiosity has filled many days with joy and enthusiasm. In this spirit, I was one the founding members of the Data Hub Project, a center aimed at collecting, tidying, and organizing existent and newly created databases, a project at the heart of the San Francisco de Quito university. There I learned about ETL pipelines, SQL, the Google Cloud Platform and became ever more familiarized with the scientific computing stack of the Python ecosystem."
  },
  {
    "objectID": "blog/index.html",
    "href": "blog/index.html",
    "title": "Blog",
    "section": "",
    "text": "Exploring Fiscal Cyclical Patterns Across the World\n                    \n                        \n                            \n                        \n            \n                \n                    \n                \n        \n\n\nNo matching items"
  },
  {
    "objectID": "blog/index.html#posts",
    "href": "blog/index.html#posts",
    "title": "Blog",
    "section": "",
    "text": "Exploring Fiscal Cyclical Patterns Across the World\n                    \n                        \n                            \n                        \n            \n                \n                    \n                \n        \n\n\nNo matching items"
  },
  {
    "objectID": "blog/contents/procyclicality_frankel/index.html",
    "href": "blog/contents/procyclicality_frankel/index.html",
    "title": "Exploring Fiscal Cyclical Patterns Across the World",
    "section": "",
    "text": "Frankel, Vegh, and Vuletin (2011) proposed that the observed shifts from pro-cyclical to counter-cyclical fiscal policies across a number of economies for the time period ranging from the 1960’s to 2000’s is due to superior or improved quality of the economy’s institutions. They achieved this by means of regression analysis. Indeed, their results show that, even after controlling for other factors that influence the conduct of fiscal policy, the quality of institutions remains a significant and economically important factor. They conclude that higher quality of institutions is associated with reduced pro-cyclicality.\nThe conduct of fiscal policy matters for a reason. Pro-cyclical fiscal policies, that is, either increased government purchases or reduced tax rates during periods of economic boom are said to exacerbate and prolong the business cycle. By contrast, counter-cyclical fiscal policy, either decreased government purchases or increases in the tax rates, attenuates the business cycle. Counter-cyclical fiscal policies that smooth over the cycle are important because its opposite implies longer booms as wells as longer recessions.\nEmpirical exercises show that, over the past 5 decades, countries exhibiting counter-cyclical fiscal regimes are overwhelmingly developed and industrialized whereas those exhibiting pro-cyclical are less developed. This fact appears in line with what is observed in other indicators used to gauge the maturity of fiscal policy such as the debt to GDP ratio, rankings by rating agencies and sovereign spreads. The interesting fact singled out by this paper consist of the exploration of changes in the cyclicality of the fiscal regime occurred in some countries.\nIt is shown that those countries who were once pro-cyclical and are now counter-cyclical - those termed ‘recent graduates’ according to the authors - have had a major increase in the quality of their institutions. The quality of institutions was measured as an average of four indices from the International Country Risk Guide dataset. Panel data models were fitted with and without controls to soundly establish the relation between government outlays cyclicality and institutional quality. Results show that institutional quality is, indeed, associated with reduced pro-cyclicality. Further, it is argued that improvements in institutional quality are responsible for the strength of the relationship. Throughout the time periods under study, institutional quality remains unaffected, except for the class of ‘recent graduates’ that experienced the largest increase."
  },
  {
    "objectID": "blog/contents/procyclicality_frankel/index.html#papers-summary",
    "href": "blog/contents/procyclicality_frankel/index.html#papers-summary",
    "title": "Exploring Fiscal Cyclical Patterns Across the World",
    "section": "",
    "text": "Frankel, Vegh, and Vuletin (2011) proposed that the observed shifts from pro-cyclical to counter-cyclical fiscal policies across a number of economies for the time period ranging from the 1960’s to 2000’s is due to superior or improved quality of the economy’s institutions. They achieved this by means of regression analysis. Indeed, their results show that, even after controlling for other factors that influence the conduct of fiscal policy, the quality of institutions remains a significant and economically important factor. They conclude that higher quality of institutions is associated with reduced pro-cyclicality.\nThe conduct of fiscal policy matters for a reason. Pro-cyclical fiscal policies, that is, either increased government purchases or reduced tax rates during periods of economic boom are said to exacerbate and prolong the business cycle. By contrast, counter-cyclical fiscal policy, either decreased government purchases or increases in the tax rates, attenuates the business cycle. Counter-cyclical fiscal policies that smooth over the cycle are important because its opposite implies longer booms as wells as longer recessions.\nEmpirical exercises show that, over the past 5 decades, countries exhibiting counter-cyclical fiscal regimes are overwhelmingly developed and industrialized whereas those exhibiting pro-cyclical are less developed. This fact appears in line with what is observed in other indicators used to gauge the maturity of fiscal policy such as the debt to GDP ratio, rankings by rating agencies and sovereign spreads. The interesting fact singled out by this paper consist of the exploration of changes in the cyclicality of the fiscal regime occurred in some countries.\nIt is shown that those countries who were once pro-cyclical and are now counter-cyclical - those termed ‘recent graduates’ according to the authors - have had a major increase in the quality of their institutions. The quality of institutions was measured as an average of four indices from the International Country Risk Guide dataset. Panel data models were fitted with and without controls to soundly establish the relation between government outlays cyclicality and institutional quality. Results show that institutional quality is, indeed, associated with reduced pro-cyclicality. Further, it is argued that improvements in institutional quality are responsible for the strength of the relationship. Throughout the time periods under study, institutional quality remains unaffected, except for the class of ‘recent graduates’ that experienced the largest increase."
  },
  {
    "objectID": "blog/contents/procyclicality_frankel/index.html#exploratory-analysis",
    "href": "blog/contents/procyclicality_frankel/index.html#exploratory-analysis",
    "title": "Exploring Fiscal Cyclical Patterns Across the World",
    "section": "Exploratory Analysis",
    "text": "Exploratory Analysis\nThe World Economic Outlook and the International Country Risk Guide datasets were the main data sources. From these we can obtain time series of real GDP, government expenditures and the four basic indicators to represent institutional quality used in the paper. The results of this partial replication are presented as follows. First, the data must be rearranged and transformed. Second, a general overview of the correlation between government expenditures and real GPD by means of graphical devices. Third, an overview of the influence of institutional quality to the fiscal regime.\n\nData Wrangling\nOur main dataset - the World Economic Forum - must be transformed. The following operations were performed. Data contents were pivoted from wide to long format. The data column containing variable names was pivoted from long to wide format. Finally, the data rows were filtered for countries with a population over 1 million people and whose share of the economic world is over 0.1 percent.\n\n\nCode\n# load all packages in the tidyverse, plus additional packages\nlibrary(tidyverse)\nlibrary(reshape2)\n\n# select directory for file weo.txt\nsubdir &lt;- \"/blog/contents/procyclicality_frankel/data/weo.txt\"\ncuwdir &lt;- here::here()\nfile_weo &lt;- paste0(cuwdir, subdir)\n\n# Read in and transform the Word Economic Outlook dataset\ndf &lt;- \n  read_tsv(file_weo) %&gt;%\n  select(-c('WEO Country Code', \n            'Units', 'Scale',\n            'Subject Descriptor', \n            'Subject Notes',\n            'Country/Series-specific Notes')) %&gt;%\n  filter(`WEO Subject Code` %in% c('NGDP_R', 'GGX', 'LP', 'PPPSH')) %&gt;% \n  pivot_longer(cols = -c('WEO Subject Code', 'Country', 'ISO'), \n               names_to = 'Year') %&gt;% \n  pivot_wider(id_cols = c('Country', 'ISO', 'Year'), \n              names_from = 'WEO Subject Code') %&gt;%\n  mutate(\n    across(everything(), ~ifelse(. == 'n/a', NA, .)),\n    across(\n      c(Year, NGDP_R, PPPSH, LP, GGX), \n      ~as.numeric(gsub(',', '', .))\n      )\n    )\n\n# Further filter the dataset:\n# Only countries with population above 1 million and a share of word gross product\ndf &lt;-\n  df %&gt;%\n  filter(\n    Country %in% \n      (df %&gt;% \n         group_by(Country) %&gt;%\n         summarise(pop = last(LP), ppp = nth(PPPSH, 42)) %&gt;%\n         filter(pop &gt; 1, ppp &gt; 0.1) %&gt;%\n         pull(Country)),\n    Year &gt;= 1995,\n    Country!='Venezuela',\n    Country!='Uzbekistan'\n  ) %&gt;%\n  rename(NGDPR=NGDP_R) %&gt;%\n  select(-c(LP, PPPSH))\n\n\n\n\nFiscal Procyclicality Across The World\nPro- and counter-cyclicality are measured as the correlation between the cyclical components of two series: real GDP and government purchases. Since this measure consists of a correlation coefficient, it will be restricted to the range from -1 to 1. Positive values indicate a positive relation between changes in GDP and government purchases which describes the phenomenon of fiscal pro-cyclicality whereas negative relation indicates counter-cyclicality.\nSeveral manipulations must be applied to the data before delving into exploratory analysis. At the very intial stage, it is important to perform the following: take the logarithms of the series and calculate the cycle. Taking of logarithm of a series helps to tame excessive variability. The cycle was calculated using the Hodrick-Prescott filter as it was done in the original paper. Additionally, some of the countries in the final selection didn’t have all observations complete. Therefore, a procedure to backward fill these values was used whereby the a missing entry was filled with the next non-missing value.\n\n\nCode\n# Load up the library containing the routine for the Hodrick-Prescott filter\nlibrary(mFilter)\nlibrary(zoo)\n\n# Obtain the cyclical component of GDP and Government expenditures\ndf &lt;-\n  df %&gt;%\n  group_by(Country) %&gt;%\n  mutate(\n    across(c(NGDPR, GGX),\n           ~na.locf(., fromLast=TRUE)),\n    across(c(NGDPR, GGX),\n           ~hpfilter(log(.), freq=1)$cycle,\n           .names = '{col}_CYC'),\n  )\n\n\nFiscal regimes vary widely across the world. It is of interest to understand the reasons behind different policy choices, particularly on the assumption that the optimal policy consist of smoothing the cycle which is consistent with a counter-cyclical regime. Most countries in our sample are counter-cyclical, but this result is potentially biased because of the previous filter applied which left countries with a share in global GDP above the threshold of 0.1 percent. It is, however, noteworthy the wide range of values for the correlation between real GDP and government expenditures. Ecuador, at the rightmost position, is the most pro-cyclical country and the United Kingdom, at the leftmost position, is the most counter-cyclical. There is a big chunk of countries for which the relation is weak (0 ± .25) and may be described as acyclical.\nAs a general trend, most developed countries are found towards the left end of the distribution. This list includes countries such as Japan, UK, US, Norway, as well as some middle- to high-income countries. Towards the center and right end of the distribution the story is not as simple. The positions are shared by low, meddle and high-income countries and a disordered array. The commonalities that tie together pro-cyclical countries are interesting in that they may unveil the reasons that prevent a country to move to a counter-cyclical regime. One common feature shared by many of the countries that sit on right end of the distribution is that they are resource rich. Take the examples of Ecuador, Russia, Kuwait, Mexico, Saudi Arabia, etc.\nThe causes for fiscal pro-cyclicality reportedly found in the literature include two main strands. First, some countries have imperfect access to international credit markets. Second, political distortions affect the conduct of fiscal policy. Imperfect access to credit markets implies that these countries cannot access credit in times of recession and are forced to cut spending and cut taxes, thus reducing revenue. Political distortions occur when, given an increase in government revenue, politicians want a share of that revenue to support programs associated with their campaings and political parties.\nThe reason explored by Frankel et al (2011) is that these countries have, on average, institutions of less quality. They pointed to example of Chile which, although appears as more pro-cyclical in this replication, had managed to turn the tide and became counter-cyclical for the most part of the last two decades. This was achieved mainly thanks to a fiscal rule that was monitored by experts.\n\n\nCode\ndf %&gt;%\n  group_by(Country) %&gt;%\n  summarise(COR = cor(NGDPR_CYC, GGX_CYC)) %&gt;%\n  ggplot(aes(x=reorder(Country, COR), y=COR)) +\n  geom_bar(stat = 'identity', width=0.4, fill = '#213cb0') +\n  scale_y_continuous(breaks = seq(-1, 1, 0.25)) +\n  labs(\n    title = 'Across-Country Correlations Between Cyclical Components of GDP and Government Purchases',\n    subtitle = '',\n    x = '',\n    y = ''\n  ) +\n  theme_minimal() +\n  theme(\n    axis.text.x = element_text(angle = 45, hjust = 1),\n    panel.grid.major.y = element_line(size = .1, color = 'black')\n  )\n\n\n\n\n\nCountries once pro-cyclical can adhere to a counter-cyclical fiscal regime. The fact that this achievement is possible motivates the study for the underlying causes and/or mechanisms that enable this change. Chile is one example, but there are other as shown in the paper. The next figure highlights the trajectories of three countries: Ecuador, Guatemala, and the US. Ecuador exhibits a persistent pattern of high correlation between the expansion of the state and that of the economy. In contrast, the US presents the opposite pattern, although with more variability. Guatemala would stand as what the paper by Frankel et al (2011) would describe as a recent graduate. Its respective series for the rolling correlation went from looking like Ecuador’s to looking more like that of the US.\n\n\nCode\n# Plot rolling correlations\ndf %&gt;%\n  group_by(Country) %&gt;%\n  transmute(ROLCOR = rollapplyr(cbind(NGDPR_CYC, GGX_CYC), \n                             width=5,\n                             FUN=function(x) cor(x[, 1], x[, 2]),\n                             by.column=FALSE,\n                             fill=NA),\n            Year = Year) %&gt;%\n  ggplot(aes(x = Year, \n             y = ROLCOR, \n             group=Country,\n             color=Country,\n             alpha=Country)) +\n  geom_line(linewidth=1) +\n  xlim(1999, 2022) +\n  ylim(-1., 1.) +\n  scale_color_manual(values = c('Ecuador'='#d6c720', 'Guatemala'='blue', 'United States'='red'), \n                     na.value = 'gray') +\n  scale_alpha_manual(values = c('Ecuador'=1, 'Guatemala'=1, 'United States'=1),\n                     na.value = 0.2) + \n  scale_y_continuous(breaks = seq(-.75, .75, 0.25)) +\n  labs(\n    title='Rolling Correlation Between The Cyclical Components of GDP and Government Purchases',\n    y = '',\n    x = 'Year'\n  ) + \n  theme_minimal() +\n  theme(\n    panel.grid.major.y = element_line(size = .1, color = 'black')\n  )\n\n\n\n\n\nThe countries in the panel exhibit wide differences in their paths. Frankel et al (2011) argue that the observed change has to do with improved quality of institutions. This hypothesis can be founded on a exploratory analysis of the relationship between institutional quality and fiscal pro-cyclicality before proceeding to formal statistical modeling.\n\n\nInstitutional Quality and Fiscal Procyclicality\nInstitutional Quality, as measured in Frankel et al (2011), consists of the average of four indicators included in the Political Risk section from the International Country Risk Guide dataset. A free tier from this paid dataset was used covering the years from 1996 to 2021. The values for 1997 and 1999 were missing and were interpolated via a cubic spline.\n\n\nCode\n# select directory for file weo.txt\nsubdir &lt;- \"/blog/contents/procyclicality_frankel/data/icrg.txt\"\ncuwdir &lt;- here::here()\nfile_icrg &lt;- paste0(cuwdir, subdir)\n\n# read in a subset of the Political Risk tier from the International Country Risk Guide dataset.\npoli &lt;- \n  read_tsv(file_icrg) %&gt;%\n  pivot_longer(cols=-c('var', 'Year'), \n               names_to = 'ISO') %&gt;%\n  pivot_wider(id_cols = c('Year', 'ISO'), \n              names_from = 'var',\n              values_from = 'value') %&gt;%\n  mutate(ISO = ifelse(ISO == 'ROM', 'ROU', ISO)) %&gt;%\n  rowwise() %&gt;%\n  transmute(ISO=ISO, Year=Year,\n            IQ = mean(c(RQ, VA, CC, GE)))\n\n# Merge new data to main dataframe\ndf &lt;-\n  df %&gt;%\n  left_join(poli, by = c('Year', 'ISO')) %&gt;%\n  mutate(IQ = na.spline(IQ)) %&gt;%\n  group_by(Country) %&gt;%\n  mutate(ROLCOR = rollapplyr(cbind(NGDPR_CYC, GGX_CYC), \n                             width=5,\n                             FUN=function(x) cor(x[, 1], x[, 2]),\n                             by.column=FALSE,\n                             fill=NA)) %&gt;%\n  drop_na()\n\n# Write a function to plot time series\npltime &lt;- function(df_, country, variable) {\n  \n  llimit &lt;- ifelse(variable=='IQ', 0, -1)\n  colour &lt;- ifelse(variable=='IQ', '#e08f0b', '#1421de')\n  title &lt;- ifelse(variable=='IQ', \n                  'Institutional Quality Index', \n                  'Fiscal Procyclicality')\n  df_ %&gt;%\n    filter(Country==country) %&gt;%\n    ggplot(aes(x = Year, y = !!sym(variable))) +\n    geom_line(color=colour) +\n    ylim(llimit, 1) +\n    labs(\n      title = title,\n      x = '',\n      y = ''\n    ) +\n    theme_minimal() +\n    theme(\n      panel.grid.major.y = element_line(size=.1, color='black')\n    )\n}\n\n\nInstitutional quality and fiscal pro-cyclicality appear to be negatively correlated. From the inspection of the three following visualizations, it must be clearer why it is reasonable to hypothesize that it is likely these series are involved in a causal relationship. Ecuador, the most pro-cyclical country, exhibits the lowest institutional quality index among the three. The US exhibits a consistently high institutional quality index with exception of the most recent periods. Guatemala, our case of interest, presents an increase in institutional quality that closely coincides with the change from pro-cyclicality to counter-cyclicality. Note, please, that the increase in institutional quality comes a bit after the drop in fiscal pro-cyclicality began.\nIt should be stated, as it is in the paper, that we don’t know the direction of the causality as of yet. Namely, the causality may run from improved institutions to an improved fiscal regimes. Also, an improved fiscal regime may cause institutions to improve. It may be synergic as well. In this regard, Frankel et al (2011) also include the change in institutional quality from first to last period as the main explanatory variable and found that increases in institutional quality were associated with less pro-cyclicality.\n\n\nCode\n# Import library for a grid of charts\nlibrary(cowplot)\n\n# Draw the title for Ecuador\ntitle &lt;- \n  ggdraw() +\n  draw_label(\"Ecuador\", size = 15)\n\n# Plot without title and save\nbase &lt;-\n  plot_grid(\n  pltime(df, 'Ecuador', 'IQ'),\n  pltime(df, 'Ecuador', 'ROLCOR'),\n  nrow = 1\n)\n\n# Include title\nplot_grid(title, base, ncol = 1, rel_heights = c(0.15, 1))\n\n\n\n\n\n\n\nCode\n# Draw the title for the US\ntitle &lt;- \n  ggdraw() +\n  draw_label(\"Guatemala\", size = 15)\n\n# Plot without title and save\nbase &lt;-\n  plot_grid(\n  pltime(df, 'Guatemala', 'IQ'),\n  pltime(df, 'Guatemala', 'ROLCOR'),\n  nrow = 1\n)\n\n# Include title\nplot_grid(title, base, ncol = 1, rel_heights = c(0.1, 1))\n\n\n\n\n\n\n\nCode\n# Draw the title for the US\ntitle &lt;- \n  ggdraw() +\n  draw_label(\"United States\", size = 15)\n\n# Plot without title and save\nbase &lt;- \n  plot_grid(\n  pltime(df, 'United States', 'IQ'),\n  pltime(df, 'United States', 'ROLCOR'),\n  nrow = 1\n)\n\n# Include title\nplot_grid(title, base, ncol = 1, rel_heights = c(0.1, 1))\n\n\n\n\n\nA simple algorithm was employed to build a model to represent the relationship between institutional quality and fiscal pro-cyclicality. A loess (Local Polynomial Regression Fitting) curve was fitted to the data for the last four years in the sample. Although not exactly a straight line, increasing institutional quality reduces pro-cyclicality. Let 0.6 be the threshold above which the relation is better approximated linearly. From that threshold onward, it is clear the increases in the institutional quality index are associated with a decrease in fiscal pro-cyclicaity. This is less obvious for data points below the threshold where the data is more spread out, suggesting that countries with poorer institutional quality vary widely in their fiscal regimes.\n\n\nCode\ndf %&gt;%\n  filter(Year %in% c(2018, 2019, 2020, 2021)) %&gt;%\n  ggplot(aes(x = IQ, y = ROLCOR, \n             group = Year, \n             color = as.factor(Year),\n             s=0.5)\n         ) +\n  geom_point(alpha = 0.25) +\n  geom_smooth(linewidth=0.75,\n              method = 'loess',\n              span = 1,\n              se=FALSE) +\n  guides(\n    color = guide_legend(title='Year')\n  ) +\n  labs(\n    title = 'LOWESS Model For Years 2018 to 2021',\n    y = 'Correlation between GDP and Govt. Purchases',\n    x = 'Institutional Quality Index'\n  ) +\n  theme_minimal() +\n  theme(\n    panel.grid.major.y = element_line(linewidth = 0.1, colour = 'black')\n  )\n\n\n\n\n\nThere exists, therefore, a real and persistent association between institutional quality and fiscal pro-cyclicality. The present work aimed at crafting compelling visualizations that explore this relationship without much emphasis on formal statistical modelling. The resulting figures can serve as the motivation for further work to understand the extent of this relationship after controlling for other factors and to investigate whether there exists a truly causal relationship."
  },
  {
    "objectID": "blog/contents/procyclicality_frankel/index.html#references",
    "href": "blog/contents/procyclicality_frankel/index.html#references",
    "title": "Exploring Fiscal Cyclical Patterns Across the World",
    "section": "References",
    "text": "References\nFrankel, Jeffrey A., Carlos A. Vegh, and Guillermo Vuletin, 2011, “On Graduation from Fiscal Procyclicality.” NBER Working Paper No. 17619 (Cambridge, Massachusetts: National Bureau of Economic Research)"
  },
  {
    "objectID": "blog/contents/wagner_law/index.html",
    "href": "blog/contents/wagner_law/index.html",
    "title": "Elías José Mantilla Ibarra",
    "section": "",
    "text": "Wagner’s Law & On the Importance of Politics\nPolitical institutions — constrains and incentives — determine the final outcome of collective decisions which, in the realm of economic policy for instance, matter to explain economic outcomes. The New Political Economics focus on the determination of equilibrium policy outcomes, such as the inflation rate, whereas neoclassical economics would take those variables as endogenously given. Shortcomings of traditional models in economics have inspired waves of professionals entering the field to pay attention and explicitly account for the role of politics.\nWagner’s Law is one example that illustrates how merely economic indicators fail to fully account for the variability observed in the real world. Wagner’s Law, named after the originator of the thesis, states that as nations develop and incomes rise, the public sector will grow in relative importance. In their introductory textbook, authors Leopoldo Fergusson and Pablo Querubín (2018), use this example as a leading proposition for the argument in favor of studying and paying attention to politics.\nIn order to understand the validity of Wagner’s Law in the world, data can be collected on national income and government size as measured by government outlays and tax income. The two following graphics are reproduced from the book. Both consist of scatter plots that relate the two measure of government size to national income. Both series of government expenses and tax revenue are expressed as percentage of GDP. National Income is the purchasing power parity adjusted Gross National Income per capita in 2017 USD dollars.\n\n# Import all necessary libraries\nlibrary(WDI)\nlibrary(tidyverse)\nlibrary(rstanarm)\nlibrary(scales)\nlibrary(readxl)\nlibrary(reshape2)\nlibrary(forcats)\nlibrary(gtsummary)\n\n# Read in data through the WDI API\ndf &lt;- WDI(\n  country = \"all\",\n  indicator = c(\"NY.GNP.PCAP.PP.KD\", \"GC.XPN.TOTL.GD.ZS\",\n                \"GC.TAX.TOTL.GD.ZS\", \"SP.POP.TOTL\"),\n  start = 2019,\n  end = 2019,\n  cache = NULL,\n  latest = NULL\n)\n\n# Specify location of data set\n# select directory for file weo.txt\nsubdir &lt;- \"/blog/contents/wagner_law/data/polity.xlsx\"\ncuwdir &lt;- here::here()\nfile_polity &lt;- paste0(cuwdir, subdir)\n\n# Read in data from Polity V project\npolity &lt;- \n  file_polity %&gt;% \n  read_excel()\n\n# set SEED\nSEED = 1603\n\n# Clean up resulting query \ndf &lt;-\n  df %&gt;% \n  rename(\"rgnppc\"=\"NY.GNP.PCAP.PP.KD\",\n         \"govexp\"=\"GC.XPN.TOTL.GD.ZS\",\n         \"govtax\"=\"GC.TAX.TOTL.GD.ZS\", \n         \"pop\"=\"SP.POP.TOTL\") %&gt;%\n  filter(!iso3c %in% c(\"AFE\", \"CEB\", \"EAP\", \"TEA\", \n                       \"EAS\", \"EMU\", \"ECA\", \"TEC\", \n                       \"ECS\", \"EUU\", \"IBD\", \"IBT\", \n                       \"LTE\", \"LAC\", \"LCN\", \"TLA\", \n                       \"LMY\", \"MHL\", \"MIC\", \"NAC\",\n                       \"OED\", \"PSS\", \"PST\", \"WLD\") \n         & !iso2c %in% c(\"XD\", \"XT\")\n         & pop &gt; 1e6\n         & !country == \"Croatia\") %&gt;% # The figure for this country seems off, might check in the future\n  select(-c(iso2c, year)) %&gt;%\n  left_join(polity %&gt;% select(c(country, polity2)), by = \"country\") %&gt;% \n  drop_na()\n\nThe resulting graphics show that there is much variability left unexplained by incomes only. Countries with less national income per capita such as Ecuador or Brazil show similar levels of government spending as the US or Sweden. The case is very similar for the levels of tax income. This is to be expected as there are many factors influencing government expenditures. A reason behind the wide variability in levels of government spending is that some countries may finance larger social programs than others. This sorts of decisions are taken after a process of deliberation that involve the coming together of heterogeneous interests.\n\n# Scatter plot of government expenses vs national income\nggplot(df, aes(rgnppc, govexp)) +\n  geom_point(shape=1, stroke=0.5) +\n  ggrepel::geom_text_repel(aes(label = iso3c), max.overlaps = 6) +\n  scale_x_continuous(labels = label_dollar(scale = 1/1000, suffix = \"k\"),\n                     breaks = seq(0, 80000, 15000)) +\n  scale_y_continuous(labels = label_comma(suffix = '%')) +\n  labs(\n    title = \"Wagner's Law Against Evidence\",\n    subtitle = \"Government Expenses As Percentage of GDP and GNI per capita are in thousands\",\n    y = \"Government Expenses\",\n    x = \"GNI per capita\"\n  ) +\n  theme_minimal()\n\n\n\n\nFigure 1: Government Expenses vs National Income\n\n\n\n\n\n# Scatter plot of tax revenue vs national income\nggplot(df, aes(rgnppc, govtax)) +\n  geom_point(shape=1, stroke=0.5) +\n  ggrepel::geom_text_repel(aes(label = iso3c), max.overlaps = 6) +\n  scale_x_continuous(labels = label_dollar(scale = 1/1000, suffix = \"k\"),\n                     breaks = seq(0, 80000, 15000)) +\n  scale_y_continuous(labels = label_comma(suffix = '%')) +\n  labs(\n    title = \"Wagner's Law Against Evidence\",\n    subtitle = \"Tax Revenue As Percentage of GDP and GNI per capita are in thousands\",\n    y = \"Tax Revenue\",\n    x = \"GNI per capita\"\n  ) +\n  theme_minimal()\n\n\n\n\nFigure 2: Tax Revenue vs National Income\n\n\n\n\n\n\nA Linear Model for the Relation Between Government Size And Economic Development\nLinear regression is a technology useful for a variety of purposes. It can be used to make predictions, for instance, of the values that a variable of interest will take given a series of conditioning variables. It can be used to make comparison between individuals or entities. It can be used to establish a causal relation whereby we assign an effect in the outcome variable to a particular predictor. This is achieved through the estimation of the parameters of a model that represents a relation among variables. From this model, we obtain a conditional probability distribution for a variable of interest. In general, the estimated coefficients of such a model are called effects but ,as it is explained by Gelman et al (2020) in Regression and Other Stories, that terminology is misleading if one does not pay careful attention to the underlying assumptions.\nIn the present blog post, I do not assume anything about the data generating process and, instead, focus on understanding and characterizing the data collected, as is. Therefore, I will not use the terminology of effects to describe and interpret the regression model’s coefficients but I will make comparison between the countries. Further, it must be mentioned that for that terminology to make sense I would have to convince you, dear reader, that an intervention or interference separated two distinguishable groups: control and treatment. This intervention exists and matters regarding the data generating process. In this particular case, we can only account for observational patterns.\nIt is of interest to understand, empirically, the relation between government expenses and national income. First, it is useful to explore the variable of interest in isolation and then move to bivariate relationship. The empirical cumulative distribution function, ECDF, is plotted in Figure 3. The average level of government expenses sits around 26%. More than three quarters of countries’ governments spend less than 35% of GDP, thus leaving about 20 countries with government expenses over that level of GDP. As can be seen in Figure 1, countries whose government expenses are over that level span across the full spectrum in terms of national income, which suggest that, indeed, the variation in this variable of interest cannot be explained by national income alone. Nevertheless, a linear regression model is always a useful starting point to characterize the relation between two variables.\n\n# `ecdf` function calculate vector for the empirical cumulative distribution\necdf &lt;- function(data) {\n  n = length(data)\n  \n  ecdf_ = tibble(\n    x = sort(data),\n    y = seq(1, n) / n\n  )\n  \n  return(ecdf_)\n}\n\n# Plot the ECDF\nggplot(\n  data = ecdf(df %&gt;% pull(govexp)),\n  aes(x, y)\n) +\n  geom_point() +\n  scale_y_continuous(labels = label_percent()) +\n  theme_minimal() +\n  labs(\n    x = \"Government Expenses as Percentage of GDP\",\n    y = \"\"\n  ) +\n  theme(\n    panel.grid.major.y = element_line(colour = 'black', linetype = \"dotted\") \n  )\n\n\n\n\nFigure 3: ECDF: Government Expenditures as Percentage of GDP\n\n\n\n\nAs recommended by Gelman et al (2020), we start with a simple model that includes only one predictor. Namely, that of national income, the predictor of interest. We standardize national income by transforming it to its z-score. This transformation is justified by the wide range of the original scale and, also, it makes interpretation easier. The computational engine we are going to use is from the rstanarm package with null priors to obtain the maximum likelihood estimates.\n\n# Re-scale using z-score\ndf &lt;- \n  df %&gt;% \n  mutate(zrgnppc = (rgnppc - mean(rgnppc)) / sd(rgnppc))\n\n# Fit simple linear regression model\nfit.1 &lt;- \n  stan_glm(\n    govexp ~ zrgnppc,\n    data = df,\n    refresh = 0,\n    prior = NULL, \n    prior_intercept = NULL,\n    prior_aux = NULL\n  )\n\n# Display model results\nfit.1 %&gt;% \n  tbl_regression(\n    intercept=TRUE,\n    label = list(`(Intercept)` ~ \"Baseline\",\n                 zrgnppc ~ \"GNI per capita, PPP (z-score)\")\n  )\n\n\n\n\n\n  \n    \n    \n      Characteristic\n      Beta\n      95% CI1\n    \n  \n  \n    Baseline\n26\n24, 28\n    GNI per capita, PPP (z-score)\n4.3\n2.3, 6.2\n  \n  \n  \n    \n      1 CI = Credible Interval\n    \n  \n\n\n\n\nFrom the fitted model we know that the government expenditure level of the country with average national income is 26.30%. The point estimate of the difference in expenditure level for a country whose national income is one standard deviation away is 4.29 percentage points in either direction, and it is 8.58 percentage points for a country that sits two standard deviations away. This is useful, as it argues in favor of a positive relation between the variable of interest, government expenses, and the main predictor, national income. Note, however, that there is strong predictive uncertainty in that the error standard deviation, how far off predictions are likely to be from the true value, is 9.51. This, of course, complicates inference but it is also evidence that national income cannot fully account for the variability observed in the level of government expenditures in this cross-section of countries.\nThe same model was fitted again without the standardization and plotted in Figure 4. From a visual inspection, we observe that the model does not fit the data perfectly. The cloud of points allows us to hypothesize that a more accurate relation would be polynomial as the points form a U-shape that increases but eventually stagnates and declines. For national incomes below $30,000 USD, the relation appears positive and stronger than suggested by the fitted model. Beyond the point, the relation flattens out and even becomes negative. This latter trend is led by countries such as Canada, the USA, Ireland and the United Arab Emirates.\nPosterior simulations offer us parameter sets that are used to plot more lines around the fitted model so as to represent the uncertainty of this linear predictor.\n\n# Fit simple linear regression model in original scale\nfit.2 &lt;- \n  stan_glm(\n    govexp ~ rgnppc,\n    data = df,\n    refresh = 0,\n    seed = SEED,\n    prior = NULL, \n    prior_intercept = NULL,\n    prior_aux = NULL\n  )\n\n# Collect simulations\nsims.2 &lt;- as_tibble(fit.2)\n\n# Plot fitted model with uncertainty - other parameter sets resulting from simulations\ndf %&gt;% \n  ggplot(aes(rgnppc, govexp)) +\n  geom_abline(\n    aes(slope = rgnppc, intercept = `(Intercept)`),\n    data = sims.2 %&gt;% slice_sample(n = 50),\n    color = \"#e0df87\",\n    alpha = 0.33,\n    linetype = \"solid\"\n  ) +\n  geom_abline(\n    slope = coef(fit.2)[[\"rgnppc\"]],\n    intercept = coef(fit.2)[[\"(Intercept)\"]],\n    linewidth = 0.98,\n    color = \"#b0830b\"\n  ) +\n  geom_point(shape=1, fill = 'black', stroke = 0.75) +\n  scale_x_continuous(labels = label_dollar(scale = 1/1000, suffix = \"k\"),\n                     breaks = seq(0, 80000, 15000)) +\n  scale_y_continuous(labels = label_comma(suffix = '%')) +\n  labs(\n    title = \"\",\n    subtitle = \"\",\n    y = \"Government Expenses\",\n    x = \"GNI per capita\"\n  ) +\n  theme_minimal()\n\n\n\n\nFigure 4: Linear Model for Government Expenses vs National Income\n\n\n\n\n\n\nControlling for Political Regime Type\nGiven the initial comments on the importance of politics, an extension to the current model may consist of the inclusion of a political variable. More specifically, we include a proxy for the regime type. The data set comes from the Polity IV project whose aim to unveil the political regimes and structures across the globe. The proxy for the regime type used in the post if the discretized polity score. The polity score exists in the range from -10 to 10 where higher scores indicate a more democratic regime. The score is made discrete by means of binning. Scores of less than -5 will be considered authoritarian, score greater than 5 will be considered democratic and those in the middle range will be considered “mixed”. This choice is arbitrary and its sole purpose is to illustrate a simple relationship clearly.\n\n# Discretize polity2 index\ndf  &lt;- \n  df %&gt;% \n  mutate(\n    reg = \n      case_when(\n        polity2 &gt; 5 ~ \"dem\",\n        polity2 &lt; -5 ~ \"aut\",\n        TRUE ~ \"mix\"\n      ),\n    dem = if_else(polity2 &gt; 5, 1, 0),\n    aut = if_else(polity2 &lt; -5, 1, 0),\n    mix = if_else(polity2 &gt;= -5 \n                  & polity2 &lt;= 5, 1, 0)\n  )\n  \n# Fit linear saturated model\nfit.3 &lt;- \n  stan_glm(\n    govexp ~ zrgnppc + dem + mix,\n    data = df,\n    refresh = 0,\n    seed = SEED,\n    prior = NULL, \n    prior_intercept = NULL,\n    prior_aux = NULL\n  )\n\nfit.3 %&gt;% \n  tbl_regression(\n    intercept=TRUE,\n    label = list(`(Intercept)` ~ \"Baseline\",\n                 zrgnppc ~ \"GNI per capita, PPP (z-score)\",\n                 dem ~ \"Democratic Regime\",\n                 mix ~ \"Mixed Regime\")\n  )\n\n\n\n\n\n  \n    \n    \n      Characteristic\n      Beta\n      95% CI1\n    \n  \n  \n    Baseline\n15\n8.1, 22\n    GNI per capita, PPP (z-score)\n3.7\n1.6, 5.7\n    Democratic Regime\n13\n5.7, 20\n    Mixed Regime\n6.7\n-2.0, 15\n  \n  \n  \n    \n      1 CI = Credible Interval\n    \n  \n\n\n\n\nA first impression is that there is a high degree of uncertainty around the point estimates given the wide credible intervals. There are two reasons for this. First, it must be noted that a linear model may not be an appropriate choice to represent the relationship between these variables. Second, this data set is imbalanced with almost 78% of the countries in the category of democratic regime, 15% in the category of mixed regime, and close to 6% in the category of authoritarian.\nAlthough the task of statistical inference is made hard due to the uncertainty in the parameters, it is still useful to make comparisons given the estimates of the model. If, for instance, we accept the proposed scheme for discretization, we can compare the average levels of government expenditure between the countries in the three categories. The difference in government expenditure is, on average, 13.06% percentage points with 65% chances that is it 3.76 percentage points away and 95% chances that is 7.52 percentage points away. This comparison can be seen graphically in Figure 5. It also illustrates its limitations including potential varying marginal effects and different sample size for each category.\nFinally, Figure 6 better illustrates the uncertainty in the parameters’ point estimates. Even tough there is a difference between each of the categories, the degree of uncertainty does not allow us to make any definitive claims about their differences.\nImprovements are foreshadowed in the inclusion of more and better controls. Although this results are disappointing, it is a relief to know that the variation observed in the levels of government expenditures needs to be attributed to more factors other than national income and better variables other than the rather simple and arbitrary one used for this work.\n\n# Fit linear saturated model with national income in original scale \nfit.4 &lt;- \n  stan_glm(\n    govexp ~ rgnppc + dem + mix,\n    data = df,\n    refresh = 0,\n    seed = SEED,\n    prior = NULL, \n    prior_intercept = NULL,\n    prior_aux = NULL\n  )\n\n# Obtain the parameters for each of the lines - one per group\nlines.4 &lt;- tribble(\n  ~reg, ~slope, ~intercept,\n  \"aut\", coef(fit.4)[[\"rgnppc\"]], coef(fit.4)[[\"(Intercept)\"]],\n  \"mix\", coef(fit.4)[[\"rgnppc\"]], coef(fit.4)[[\"(Intercept)\"]] + coef(fit.4)[[\"mix\"]],\n  \"dem\", coef(fit.4)[[\"rgnppc\"]], coef(fit.4)[[\"(Intercept)\"]] + coef(fit.4)[[\"dem\"]]\n)\n\n# Plot fitted models for each category/group\ndf %&gt;% \n  ggplot(aes(rgnppc, govexp)) +\n  geom_abline(\n    aes(slope = slope, intercept = intercept, color = reg),\n    data = lines.4\n  ) +\n  geom_point(aes(color = reg, shape=reg)) +\n  scale_x_continuous(labels = label_dollar(scale = 1/1000, suffix = \"k\"),\n                     breaks = seq(0, 80000, 15000)) +\n  scale_y_continuous(labels = label_comma(suffix = '%')) +\n  scale_color_manual(values = c(\"blue\", \"#b0830b\", \"red\"),\n                     labels = c(\"Authoritarian\", \"Democratic\", \"Mixed\")) +\n  scale_shape_manual(values = c(3, 1, 4),\n                     labels = c(\"Authoritarian\", \"Democratic\", \"Mixed\")) +\n  scale_size_manual(values = c(2, 1, 2)) +\n  labs(\n    title = \"\",\n    subtitle = \"\",\n    y = \"Government Expenses\",\n    x = \"GNI per capita\"\n  ) +\n  theme_minimal() +\n  theme(\n    legend.position = \"bottom\",\n    legend.title = element_blank(),\n  )\n\n\n\n\nFigure 5: Saturated Linear Model for Government Expenses vs National Income\n\n\n\n\n\n# Collect simulations\nsims.3 &lt;- as_tibble(fit.3)\n\n# Plot estimated coefficients and their uncertainty\nsims.3 %&gt;% \n    melt(variable.name = \"coefficients\",\n         value.name = \"estimates\") %&gt;% \n    group_by(coefficients) %&gt;% \n    summarise(across(estimates, list(median = median, mad_sd = mad))) %&gt;%\n    filter(!coefficients %in% c(\"sigma\", \"zrgnppc\")) %&gt;% \n    mutate(\n        estimates_median =\n            case_when(\n                coefficients != \"(Intercept)\" ~ estimates_median + 15.1,\n                TRUE ~ estimates_median\n            ),\n        coefficients = fct_reorder(coefficients, \n                                   .x = estimates_median, \n                                   .fun = mean,\n                                   .desc = TRUE),\n    ) %&gt;% \n    ggplot(aes(estimates_median, coefficients, color = coefficients)) +\n    geom_point() +\n    geom_segment(aes(estimates_median - 2 * estimates_mad_sd, \n                     coefficients, \n                     xend = estimates_median + 2 * estimates_mad_sd, \n                     yend = coefficients)) +\n    scale_y_discrete(labels = c(\"Democratic\", \"Mixed\", \"Authoritatian\")) +\n    scale_x_continuous(labels = scales::label_percent(scale = 1),\n                       minor_breaks = seq(9, 33, 1)) +\n    scale_color_manual(values = c(\"#b0830b\", \"red\", \"blue\")) +\n    labs(\n        y = \"\",\n        x = \"Government Spending As Percentage of GDP\"\n    ) +\n    theme_minimal() +\n    theme(\n        legend.position = \"none\",\n        panel.grid.major.x = element_line(colour = '#808080', linewidth = 0.1,),\n        panel.grid.minor.x = element_line(colour = \"#808080\", linewidth = 0.01, linetype = \"dotted\"),\n        panel.grid.major.y = element_blank()\n    )\n\n\n\n\nFigure 6: Average Government Expenses Point Estimates and Uncertainty\n\n\n\n\nAs stated previously, regression is most often useful to make comparison. A step further would be to include the polity score as is, so as to allow for more variability coming from the political variable, as well as adding more controls. Diagnostics can be used to assess predictive accuracy and whether key linear regression assumption were violated which may negatively impact predictions. That is out the scope of the blog post whose aim was to use regression to make comparison between countries for a variable of interest.\nIn next posts, I will explore nonlinear models; hierarchical models to explore year-on-year variability; posterior predictive checks to better assess model fit and the fitting procedure.\n\n\nReferences\nFergusson, L. and Querubín, P., 2018. Economía política de la política económica. Universidad de los Andes.\nGelman, A., Hill, J. and Vehtari, A., 2020. Regression and other stories. Cambridge University Press."
  },
  {
    "objectID": "cv/index.html",
    "href": "cv/index.html",
    "title": "Curriculum Vitae",
    "section": "",
    "text": "Download current CV"
  }
]